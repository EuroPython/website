---
code: 7CJVKM
delivery: remote
duration: '30'
end: '2024-07-12T14:30:00+02:00'
level: intermediate
next_session: HX9ZWH
prev_session: XLGEHC
resources:
- description: Slides
  resource: https://program.europython.eu/media/europython-2024/submissions/7CJVKM/resources/EuroPython_2024_Streamlining_Testing_in_a_L_dL1DHRY.pdf
room: Terrace 2B
session_type: Talk
sessions_after:
- 89RTNU
- FYHQUE
- HX9ZWH
- N7ZC9X
- TBBKAM
- WBFDNJ
sessions_before:
- 9VFEQE
- GP8AMS
- JJAKNR
- JRGVQM
- KVNTFE
- PYV9VD
- XLGEHC
- XPXYWD
- XYXR3L
sessions_in_parallel:
- 8FKHES
- HZSGYK
- KDH3J3
- YMMFGD
- ZXXDBV
slug: streamlining-testing-in-a-large-python-codebase
speakers:
- jimmy-lai
start: '2024-07-12T14:00:00+02:00'
title: Streamlining Testing in a Large Python Codebase
track: DevOps and Infrastructure (Cloud & Hardware)
tweet: ''
website_url: https://ep2024.europython.eu/session/streamlining-testing-in-a-large-python-codebase
---

Maintaining code quality through effective testing becomes increasingly challenging as codebases expand and developer teams grow. In our rapidly expanding codebase, we encountered common obstacles such as increasing test suite execution time, slow test coverage reporting and delayed test startup. By leveraging innovative strategies using open-source tools, we achieved remarkable enhancements in testing efficiency and code quality.
Challenges Faced:
- Test Suite Execution Time: The duration of test suite execution escalated significantly as we added more tests over time, hampering development speed.
- Slow Test Startup: Complex test setup led to prolonged test startup times, impeding developer productivity.
- Test Coverage Reporting Overhead: Coverage tools introduced substantial overhead and impacted test performance.

Solutions Implemented:
- Parallel Test Execution: We applied pytest-xdist to distribute tests across multiple runners, significantly reducing test suite execution time and enabling faster development iterations.
- Optimized Test Startup: Pre-installing dependencies in a Docker image and utilizing Kubernetes for auto-scaling continuous integration runners helped expedite test startup times, improving developer efficiency. For local development, we used pytest-hot-reloading to reload tests fast after code editing.
- Efficient Test Coverage Reporting: Customizing the coverage tool to collect data only on updated files of pull requests minimized overhead on test coverage reporting.
As a result, in the past year, our test case volume increased by 8000, test coverage was elevated to 85%, and Continuous Integration (CI) test duration was maintained under 15 minute
