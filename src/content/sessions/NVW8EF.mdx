---
code: NVW8EF
delivery: in-person
duration: '30'
end: '2023-07-19T12:40:00+02:00'
level: advanced
next_talk: AAJLRW
prev_talk: BCDBBR
resources:
- description: Slides
  resource: https://program.europython.eu/media/europython-2023/submissions/NVW8EF/resources/EuroPython2023_HPy_dLwxQ4i.pdf
room: PyCharm (Forum Hall)
slug: hpy-the-future-of-python-native-extensions
speakers:
- stepan-sindelar
- florian-angerer
start: '2023-07-19T12:10:00+02:00'
state: confirmed
submission_type: Talk
talks_after:
- YRM7GF
- WAZGKA
- 3AD79Q
- DQBDJE
- CUEWG8
- AAJLRW
talks_before:
- RAXZVW
- PMNVR3
- BCDBBR
- PNVM3S
- LLHGKF
- H3TBAP
talks_in_parallel:
- VPWTYU
- EWHVWK
- AXWQBB
- RRJAZA
- F3KLX7
title: 'HPy: The Future of Python Native Extensions'
track: Python Internals & Ecosystem (2023)
tweet: Single binary wheels compatible with CPython, GraalPy, and PyPy, now and for
  any new version?!  HPy can do that.
website_url: https://ep2023.europython.eu/session/hpy-the-future-of-python-native-extensions
---

Updating Python versions often forces us to update native extensions at the
same time. But what if you need to update Python because of a security issue,
but cannot (yet) move to a newer version of a dependency? Or you are running a
proprietary binary extension that cannot easily be recompiled?

The HPy project provides a better C extension API for Python. It compiles to
binaries that work across all versions of CPython, PyPy, GraalPy. HPy makes
porting from the existing C API easy and its design ensures that the binaries
we produce today stay binary compatible with future Python versions.

NumPy is the single largest direct user of the CPython C API we know of. After
over 2 years of work and more than 30k lines of code ported, we can demonstrate
NumPy running its tests and benchmarks with HPy. We will show the same NumPy
binary run on multiple CPython versions and GraalPy. And we will discuss
performance characteristics of this port across CPython, GraalPy, and PyPy.
