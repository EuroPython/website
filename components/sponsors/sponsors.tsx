import { Separator } from "components/separator/separator";
import { Fragment } from "react";
import sponsors from "../../data/sponsors.json";
import { Fullbleed } from "components/layout/fullbleed";

import { SVGProps } from "react";
import { ButtonLink } from "components/button-link";

const Detail = (props: SVGProps<SVGSVGElement>) => (
  <svg
    width="114px"
    height="228px"
    viewBox="0 0 114 228"
    xmlns="http://www.w3.org/2000/svg"
    xmlnsXlink="http://www.w3.org/1999/xlink"
    {...props}
  >
    <defs>
      <rect id="path-1" x={0} y={0} width={114} height={228} />
      <polygon
        id="path-3"
        points="0 0 55.8742479 0 55.8742479 51.3344394 0 51.3344394"
      />
      <polygon
        id="path-5"
        points="0 0 56.2218838 0 56.2218838 52.6658697 0 52.6658697"
      />
    </defs>
    <g id="Page-1" stroke="none" strokeWidth={1} fill="none" fillRule="evenodd">
      <g id="Home" transform="translate(-75.000000, -5087.000000)">
        <g id="Sponsors" transform="translate(0.000000, 4974.000000)">
          <g transform="translate(75.000000, 108.000000)" id="Group-41">
            <g transform="translate(0.000000, 5.000000)">
              <mask id="mask-2" fill="white">
                <use xlinkHref="#path-1" />
              </mask>
              <g id="Mask" />
              <g mask="url(#mask-2)">
                <g transform="translate(-0.000475, 0.000000)">
                  <path
                    d="M167.645203,152.874599 C139.426741,145.865506 109.36652,154.528441 89.1945914,175.479638 C77.7030736,187.413166 70.319878,202.409962 67.5743441,218.274099 C71.1086606,219.851858 74.7399118,221.251774 78.4538426,222.470044 C80.480919,207.991559 86.9774469,194.2292 97.406484,183.397916 C110.783477,169.505266 129.20963,161.89417 148.071989,161.89417 C153.681849,161.89417 159.332574,162.568451 164.897768,163.950298 C179.477893,167.571821 192.286583,175.763045 201.695904,186.935749 C204.179144,183.948563 206.513181,180.833938 208.685659,177.601387 C197.931605,165.63267 183.713561,156.865122 167.645203,152.874599"
                    id="Fill-5"
                    fill="#3DAE2B"
                  />
                  <g
                    id="Group-9"
                    strokeWidth={1}
                    fill="none"
                    transform="translate(113.685226, 176.665561)"
                  >
                    <mask id="mask-4" fill="white">
                      <use xlinkHref="#path-3" />
                    </mask>
                    <g id="Clip-8" />
                    <path
                      d="M19.6957339,0.813238086 C12.9312099,2.53650496 7.24152114,6.7933165 3.67679378,12.8000238 C0.111116077,18.80578 -0.903847618,25.841502 0.819119779,32.6118866 L5.58412724,51.3348198 C9.46626834,51.1569771 13.2989917,50.7851243 17.0708933,50.2287716 L11.8706299,29.795886 C10.8993819,25.9794014 11.4714869,22.0136052 13.4805068,18.6279373 C15.490477,15.2432206 18.696926,12.8437712 22.5096922,11.8727692 C23.7251778,11.5627334 24.9435144,11.4143726 26.1437945,11.4143726 C32.7173,11.4143726 38.7244025,15.8585372 40.41981,22.5186022 L45.4214523,42.171643 C49.0051865,40.6252678 52.4919859,38.8981968 55.8742479,37.0056465 L51.4713202,19.7026016 C47.9141955,5.72721156 33.6581371,-2.74932135 19.6957339,0.813238086"
                      id="Fill-7"
                      fill="#01B07A"
                      mask="url(#mask-4)"
                    />
                  </g>
                  <path
                    d="M73.1772669,61.7805439 C68.5975758,45.862199 59.3175004,31.9714507 46.9706762,21.6613314 C43.8240986,23.9523634 40.797264,26.3993643 37.9044274,28.9937749 C49.40925,37.9895704 58.0621006,50.4937165 62.2188901,64.9389155 C69.1383196,88.9914224 62.6569971,115.13049 45.3018782,133.154416 C34.8718908,143.9857 21.3675517,150.992891 6.98224697,153.556868 C8.3355319,157.222139 9.87508357,160.796111 11.5828455,164.273078 C27.3214352,160.938765 42.0241537,153.006222 53.5147211,141.072694 C73.6866494,120.122448 81.2209492,89.7389322 73.1772669,61.7805439"
                    id="Fill-15"
                    fill="#3DAE2B"
                  />
                  <path
                    d="M25.6249823,117.132028 C29.8635011,117.132028 34.0640063,116.087797 37.9081337,114.03262 C44.0653901,110.740153 48.5719049,105.246052 50.5989813,98.5612597 C52.627008,91.8764678 51.9313587,84.8017536 48.6412798,78.6400284 C45.3512008,72.4792542 39.8610836,67.9685176 33.1811399,65.93997 L13.5157431,59.9674998 C11.698692,63.3436573 10.0498512,66.8225261 8.573022,70.3926938 L29.8692031,76.8596997 C37.6420384,79.2211079 42.0459165,87.4693935 39.6871712,95.2469192 C37.3274757,103.024445 29.0870729,107.430568 21.3142376,105.072013 L0.940837133,98.88461 C0.435255967,102.707752 0.117842227,106.590808 0,110.52427 L18.0023008,115.991743 C20.5111998,116.754469 23.0742683,117.132028 25.6249823,117.132028"
                    id="Fill-17"
                    fill="#3DAE2B"
                  />
                  <path
                    d="M60.3222005,75.1307266 C66.7930692,76.7379678 73.3570713,77.5206657 79.8802087,77.5206657 C101.803615,77.5206657 123.226191,68.67228 138.773762,52.5256878 C150.26433,40.5921598 157.647525,25.5953633 160.393059,9.73122716 C156.858743,8.15346792 153.227492,6.75260032 149.513561,5.53528156 C147.486484,20.0137666 140.989956,33.7761258 130.560919,44.6074097 C113.2058,62.6303846 87.3441833,70.0826579 63.069635,64.0550279 C48.4895104,60.4335046 35.6808206,52.2422808 26.271499,41.069577 C23.7882591,44.0567632 21.4542228,47.1713873 19.2817443,50.4048903 C30.0357978,62.3726554 44.2538426,71.1402036 60.3222005,75.1307266"
                    id="Fill-20"
                    fill="#F18A00"
                  />
                  <g
                    id="Group-24"
                    strokeWidth={1}
                    fill="none"
                    transform="translate(58.528338, 0.000000)"
                  >
                    <mask id="mask-6" fill="white">
                      <use xlinkHref="#path-5" />
                    </mask>
                    <g id="Clip-23" />
                    <path
                      d="M30.0877815,52.6658697 C32.2155939,52.6658697 34.3795193,52.4033853 36.5339413,51.8536898 C50.4991955,48.2949345 58.9667297,34.0294803 55.4105554,20.0550413 L50.3062764,-0.000285309085 C46.4222346,0.172802202 42.5895112,0.539899892 38.815709,1.09244849 L44.3590453,22.871993 C46.3633135,30.7484258 41.5907033,38.7884358 33.719983,40.7951097 C25.847362,42.7998815 17.8141334,38.0238075 15.8098652,30.1473747 L10.4565969,9.11438892 C6.87191244,10.656009 3.38416266,12.3783249 0,14.267071 L4.75835508,32.9643264 C7.76618288,44.7818286 18.4233017,52.6658697 30.0877815,52.6658697"
                      id="Fill-22"
                      fill="#F18A00"
                      mask="url(#mask-6)"
                    />
                  </g>
                  <path
                    d="M107.175129,179.945581 C99.1314471,151.987193 76.6055253,130.265661 48.388014,123.25847 C32.3196562,119.266996 15.6563852,120.364485 0.559275407,125.911844 C0.964120477,129.82153 1.56853706,133.671301 2.35827005,137.453548 C10.7326709,134.064076 19.7200413,132.278041 28.8148003,132.278041 C34.4246605,132.278041 40.0763357,132.952322 45.6405795,134.334169 C69.9170286,140.36275 89.2963729,159.050495 96.2167527,183.103002 C100.373542,197.552956 99.6883467,212.753273 94.7199663,226.496611 C98.5203781,227.144263 102.383512,227.601709 106.301766,227.863242 C111.27775,212.562116 111.75482,195.862024 107.175129,179.945581"
                    id="Fill-25"
                    fill="#F18A00"
                  />
                  <path
                    d="M76.5132472,181.063802 C76.6377419,174.078485 74.0366598,167.464069 69.1880224,162.437874 C64.3412856,157.410728 57.8276516,154.573805 50.8474003,154.450171 C43.8462416,154.328439 37.2565803,156.929507 32.2349809,161.780712 L17.9504122,175.576358 C20.0307077,178.819371 22.2744617,181.946359 24.6626675,184.953516 L40.1541686,169.991908 C42.985233,167.257696 46.7020149,165.760774 50.6449778,165.860632 C54.5784373,165.930058 58.2505531,167.52969 60.9827822,170.36281 C63.7150112,173.195929 65.1813867,176.923968 65.1110615,180.861233 C65.0416866,184.798498 63.4441642,188.471377 60.6130997,191.205589 L45.8134465,205.498624 C48.9248614,207.824844 52.163622,209.99034 55.509771,211.99416 L68.5322874,199.417736 C73.5548371,194.56653 76.389703,188.04912 76.5132472,181.063802"
                    id="Fill-27"
                    fill="#F18A00"
                  />
                  <path
                    d="M45.3018782,133.154225 C45.0082229,133.458555 44.704114,133.74957 44.405707,134.047243 C44.8181548,134.142346 45.2306026,134.231743 45.6411497,134.334454 C49.3360738,135.252198 52.9160066,136.466664 56.3571897,137.945516 C58.9297615,134.978301 61.2723509,131.852265 63.3659511,128.588329 C59.8582442,126.938291 56.2136882,125.537424 52.4579424,124.394285 C50.3291796,127.477526 47.9438249,130.410503 45.3018782,133.154225"
                    id="Fill-29"
                    fill="#3DAE2B"
                  />
                  <path
                    d="M63.0692548,64.0545524 C62.656807,63.9518412 62.251962,63.8329624 61.8423652,63.7235939 C61.9668598,64.1287328 62.1008578,64.5300676 62.2187,64.9390106 C63.2726277,68.6004772 64.0110423,72.3113973 64.4520003,76.0346809 C68.3056312,76.7802886 72.1811199,77.2396363 76.0528073,77.4212831 C75.7268405,73.558198 75.1167218,69.7008192 74.2291038,65.8757754 C70.4961661,65.5733478 66.7641788,64.9722967 63.0692548,64.0545524"
                    id="Fill-31"
                    fill="#FFC024"
                  />
                  <path
                    d="M92.2128729,172.519271 C93.8170478,175.906841 95.16273,179.44182 96.2166576,183.103287 C96.3335495,183.511279 96.4333353,183.922124 96.5435748,184.331067 C96.831528,184.021031 97.1118784,183.703387 97.406484,183.398106 C100.048431,180.654384 102.8928,178.166489 105.892075,175.923959 C104.610065,172.208284 103.075265,168.612438 101.296228,165.163052 C98.1144877,167.378001 95.0800504,169.836414 92.2128729,172.519271"
                    id="Fill-33"
                    fill="#FFC024"
                  />
                </g>
              </g>
            </g>
          </g>
        </g>
      </g>
    </g>
  </svg>
);

type Sponsor = {
  name: string;
  logo: string;
  url: string;
};

type Tier = {
  name: string;
  sponsors: Sponsor[];
};

const SponsorTier = ({ tier }: { tier: Tier }) => {
  return (
    <div className="relative">
      <h4 className="absolute w-10 font-bold top-0 bottom-0">
        <span className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 -rotate-90 block origin-center whitespace-nowrap">
          {tier.name}
        </span>
      </h4>
      <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-12 sm:gap-6 ml-12 items-center justify-items-center">
        {tier.sponsors.map((sponsor) => (
          <a
            key={sponsor.url}
            href={sponsor.url}
            target="_blank"
            rel="noopener noreferrer"
          >
            <img
              src={sponsor.logo}
              alt={sponsor.name}
              className="max-w-[250px] max-h-[120px]"
            />
          </a>
        ))}
      </div>
    </div>
  );
};

export const Sponsors = () => {
  const topTier = sponsors.tiers[0];
  const remaining = sponsors.tiers
    .slice(1)
    .filter((t) => t.sponsors.length > 0);

  const noSponsors = remaining.length + topTier.sponsors.length === 0;

  return (
    <Fullbleed className="bg-text text-body-inverted py-24 px-6">
      <section className="max-w-4xl lg:max-w-6xl mx-auto mb-16">
        <div>
          <div className="flex gap-6">
            <Detail />
            <div className="max-w-[250px]">
              <h3 className="font-bold text-3xl mb-4">Sponsors</h3>

              {noSponsors ? (
                <p>
                  Sponsoring EuroPython guarantees you highly targeted
                  visibility and the opportunity to present yourself and your
                  company to one of the largest and most diverse Python
                  communities in Europe and beyond.
                </p>
              ) : (
                <p>
                  EuroPython wouldn't be such an affordable event without help
                  of the sponsors. We'd like to thank all of them for their
                  support.
                </p>
              )}

              <div className="mt-4">
                <ButtonLink href="/sponsor">Become a sponsor</ButtonLink>
              </div>
            </div>
          </div>
          {topTier.sponsors.length > 0 && <SponsorTier tier={topTier} />}
        </div>

        {remaining.length > 0 && <Separator light />}

        {remaining.map((tier, index) => (
          <Fragment key={tier.name}>
            <SponsorTier tier={tier} />
            {index !== remaining.length - 1 && <Separator light />}
          </Fragment>
        ))}
      </section>
    </Fullbleed>
  );
};
